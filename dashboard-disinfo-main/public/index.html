<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizaci√≥n de malainformaci√≥n electoral - Tiempo Real</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <!-- Row 1: Compact Header -->
        <header class="compact-header">
            <div class="header-left">
                <h2>Dashboard de desinformaci√≥n</h2>
                <div class="developer-info">
                    <span class="developer-text">Desarrollado por:</span>
                    <img src="img/logo-lab.png" alt="Lab TecnoSocial" class="developer-logo">
                    <img src="img/logo-chequea.png" alt="Chequea Bolivia" class="developer-logo">
                </div>
            </div>
            <div class="header-right">
                <div class="header-status">
                    <div class="status-indicator">
                        <span id="connectionStatus" class="status-dot offline"></span>
                        <span id="statusText">En l√≠nea</span>
                    </div>
                    <button id="refreshButton" class="refresh-button" title="Recargar datos">
                        <span class="refresh-icon">‚Üª</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Row 2: Streamlined Controls -->
        <div class="controls-row">
            <div class="control-group">
                <label for="daySelector">D√≠a a visualizar:</label>
                <select id="daySelector">
                    <!-- Las opciones se cargan din√°micamente en JavaScript -->
                </select>
            </div>

            <div class="control-group">
                <label for="tipoCaso">Tipo de caso:</label>
                <select id="tipoCaso">
                    <option value="todos" selected>Todos</option>
                    <option value="Desinformaci√≥n">Desinformaci√≥n</option>
                    <option value="Rumor">Rumor</option>
                </select>
            </div>

            <div class="control-group time-controls" id="timeControls">
                <label for="startHour">Hora inicio:</label>
                <select id="startHour">
                    <option value="0" selected>00:00</option>
                    <option value="1">01:00</option>
                    <option value="2">02:00</option>
                    <option value="3">03:00</option>
                    <option value="4">04:00</option>
                    <option value="5">05:00</option>
                    <option value="6">06:00</option>
                    <option value="7">07:00</option>
                    <option value="8">08:00</option>
                    <option value="9">09:00</option>
                    <option value="10">10:00</option>
                    <option value="11">11:00</option>
                    <option value="12">12:00</option>
                    <option value="13">13:00</option>
                    <option value="14">14:00</option>
                    <option value="15">15:00</option>
                    <option value="16">16:00</option>
                    <option value="17">17:00</option>
                    <option value="18">18:00</option>
                    <option value="19">19:00</option>
                    <option value="20">20:00</option>
                    <option value="21">21:00</option>
                    <option value="22">22:00</option>
                    <option value="23">23:00</option>
                </select>
            </div>

            <div class="control-group time-controls">
                <label for="endHour">Hora fin:</label>
                <select id="endHour">
                    <option value="1">01:00</option>
                    <option value="2">02:00</option>
                    <option value="3">03:00</option>
                    <option value="4">04:00</option>
                    <option value="5">05:00</option>
                    <option value="6">06:00</option>
                    <option value="7">07:00</option>
                    <option value="8">08:00</option>
                    <option value="9">09:00</option>
                    <option value="10">10:00</option>
                    <option value="11">11:00</option>
                    <option value="12">12:00</option>
                    <option value="13">13:00</option>
                    <option value="14">14:00</option>
                    <option value="15">15:00</option>
                    <option value="16">16:00</option>
                    <option value="17">17:00</option>
                    <option value="18">18:00</option>
                    <option value="19">19:00</option>
                    <option value="20">20:00</option>
                    <option value="21">21:00</option>
                    <option value="22">22:00</option>
                    <option value="23">23:00</option>
                    <option value="24" selected>24:00</option>
                </select>
            </div>
        </div>

        <!-- Legend -->
        <div class="legend-container">
            <div id="legend" class="legend"></div>
            <div class="posts-summary">
                <span class="posts-count" id="dayPosts">0</span>
                <span class="posts-label" id="postsLabel">Posts mostrados</span>
            </div>
        </div>

        <!-- Row 3: Full-Width Bubble Chart -->
        <div class="bubble-chart-container">
            <div class="chart-header">
                <h3>Difusi√≥n en el Tiempo</h3>
                <div class="chart-controls-main">
                    <button id="zoomInBtn" class="zoom-btn" title="Acercar">üîç+</button>
                    <button id="zoomOutBtn" class="zoom-btn" title="Alejar">üîç-</button>
                    <button id="resetZoomBtn" class="zoom-btn" title="Reset zoom">üîÑ</button>
                    <button id="fullscreenBtn" class="zoom-btn" title="Pantalla completa">‚õ∂</button>
                </div>
            </div>
            <svg id="main-viz" class="main-chart">
                <defs>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="3" result="coloredBlur" />
                        <feMerge>
                            <feMergeNode in="coloredBlur" />
                            <feMergeNode in="SourceGraphic" />
                        </feMerge>
                    </filter>
                </defs>
            </svg>
            <div class="zoom-instructions">
                <small>üí° Usa la rueda del mouse para hacer zoom y arrastra para mover la vista</small>
            </div>
        </div>

        <!-- Section Title -->
        <div class="section-title-container">
            <h3 class="section-title">Interacciones acumuladas</h3>
        </div>

        <!-- Row 4: Three Bar Charts -->
        <div class="bottom-section">
            <!-- Column 1: Social Media Bar Chart -->
            <div class="chart-column">
                <div class="chart-controls">
                    <div class="control-inline">
                        <select id="socialSelector" class="chart-selector">
                            <option value="red_social" selected>Red Social</option>
                            <option value="status">Status</option>
                            <option value="formato">Formato</option>
                            <option value="tags">Tags</option>
                        </select>
                        <button id="socialColorPicker" class="color-picker-btn" title="Color de burbujas">
                            üé®
                        </button>
                    </div>
                </div>
                <svg id="social-viz"></svg>
            </div>

            <!-- Column 2: Status Bar Chart -->
            <div class="chart-column">
                <div class="chart-controls">
                    <div class="control-inline">
                        <select id="statusSelector" class="chart-selector">
                            <option value="status" selected>Status</option>
                            <option value="red_social">Red Social</option>
                            <option value="formato">Formato</option>
                            <option value="tags">Tags</option>
                        </select>
                        <button id="statusColorPicker" class="color-picker-btn" title="Color de burbujas">
                            üé®
                        </button>
                    </div>
                </div>
                <svg id="status-viz"></svg>
            </div>

            <!-- Column 3: Format Bar Chart -->
            <div class="chart-column">
                <div class="chart-controls">
                    <div class="control-inline">
                        <select id="formatSelector" class="chart-selector">
                            <option value="formato" selected>Formato</option>
                            <option value="red_social">Red Social</option>
                            <option value="status">Status</option>
                            <option value="tags">Tags</option>
                        </select>
                        <button id="formatColorPicker" class="color-picker-btn" title="Color de burbujas">
                            üé®
                        </button>
                    </div>
                </div>
                <svg id="format-viz"></svg>
            </div>
        </div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <!-- <div class="lab-logo-container">
        <a href="https://labtecnosocial.org" target="_blank" rel="noopener">
            <img src="https://labtecnosocial.org/wp-content/uploads/2021/07/cropped-logo-claro-300x149.png"
                alt="Lab TecnoSocial Logo">
        </a>
    </div> -->

    <script src="script.js"></script>
</body>

</html>